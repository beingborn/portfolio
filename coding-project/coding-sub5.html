<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXT-JS BLOG</title>

    <!-- CSS -->
    <link rel="stylesheet" href="../css/default.css">
    <link rel="stylesheet" href="../css/reset.css">

    <!-- 파비콘 -->
    <link rel="icon" href="../img/main-pavicon.svg">

    <style>
      #sub-bg {
        background: none !important;
        overflow-x: hidden;
      }
    </style>
  </head>
  <body id="sub-bg">
    <div class="wrap">
      <a href="../index.html" class="project-close"></a>

      <section class="project-view">
        <span class="blind">상단 프로젝트 영역</span>
        <div class="project-wrapper inner">
          <div class="hidden-thumb">
            <img src="../img/hidden-next.png" alt="nextjs 모바일 섬네일">
          </div>
          <div class="left-thumb">
            <div class="sub-project-title">
              <ul class="program-use">
                <li class="next"></li>
                <li class="mongo"></li>
                <li class="css"></li>
                <li class="js"></li>
              </ul>
              <span class="blind">프로젝트 제목 및 설명</span>
              <h2 class="main-title">NEXTJS BLOG PROJECT</h2>
              <p class="project-article">
                REACT와 문법이 같고 서버 사이드 렌더링을 통한
                풀스택 개발이 가능한 nextjs 프로젝트입니다. <b>서버에 대한 실습적 이해</b>를 위해 진행하였습니다.
              </p>
              <div class="new-wrap">
                <div class="new-wrap-top">
                  <div class="new-subwrap">
                    <p class="new-sub">
                      <span class="new-title"> 기여도 </span> : 개발 100%, 디자인 100%
                    </p>
                    <p class="new-sub">
                      <span class="new-title">글꼴</span> : NOTOSANS
                    </p>
                  </div>

                  <ul class="btn-wrap">
                    <li class="project-link btn-active" id="web-linker">
                      <a href="#none" target="_blank" onclick="openMo()"
                        >WEBSITE</a
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <!-- right-thumb -->
          <div class="right-thumb">
            <img
              src="../img/moniterOnly-next.png"
              alt="nextjs 태블릿 데스크탑 섬네일 이미지">
          </div>
        </div>

        <p class="arrow-down" style="margin-bottom: 20px"></p>
        <p class="arrow-down"></p>
      </section>

      <!-- 프로젝트 소개 -->
      <section class="main-task">
        <div class="inner">
          <h2 class="section-tit">PROJECT MAIN TASK</h2>
          <!-- 태스크 제목 (버튼)-->
          <div class="task-flex next-flex">
            <div class="task-flexwrap">
              <ul class="task-wrap">
                <li>
                  <a>
                    몽고 DB 연결
                    <div class="task-box">
                      <p class="task-list">1. 몽고 DB 설치 및 라이브러리 import 연결</p>
                      <p class="task-list">2. 몽고 DB 클러스터 연결</p>
                      <p class="task-list">3. 옵션 설정 및 변수 반환</p>
                    </div>
                  </a>
                </li>

                <li>
                  <a>해당 글 ID 찾아 수정하기
                    <div class="task-box">
                      <p class="task-list">1. 수정 버튼 클릭 시 해당 글 ID URL 이동</p>
                      <p class="task-list">2. 수정 시 서버 역할 js에 정보 전달</p>
                      <p class="task-list">3. 조건 성립 (저자 동일, 공백 검사) 후 포스트</p>
                    </div>
                  </a>
                </li>

                <li>
                  <a>NEXTAUTH 로그인 구현
                    <div class="task-box">
                      <p class="task-list">1. NEXTAUTH 설치, 구글 console 가입</p>
                      <p class="task-list">2. authOption 객체 정의하기</p>
                      <p class="task-list">3. NEXTAUTH 함수 호출, 내보내기</p>
                    </div>
                  </a>
                </li>

                <li>
                  <a>마우스에 따라 움직이는 큐브
                    <div class="task-box">
                      <p class="task-list">1. 전체 아이콘 세트 png 설정</p>
                      <p class="task-list">2. 개별 아이콘 background-position 변경</p>
                    </div>
                  </a>
                </li>

                <li>
                  <a>TOP 3만 보여주기
                    <div class="task-box">
                      <p class="task-list">1. 전체 아이콘 세트 png 설정</p>
                      <p class="task-list">2. 개별 아이콘 background-position 변경</p>
                    </div>
                  </a>
                </li>
              </ul>


              <!-- 1번 태스크 코드 -->
              <div class="code-real">
                <div class="code-title">
                  <h4>Mongodb 연결하기</h4>
                  <span style="font-size: 14px">
                    몽고DB는 데이터베이스입니다. 기존 데이터 베이스와 다르게 데이터를 테이블 행이 아닌 문서 단위로 저장한다는 것이 특징입니다. 몽고DB 연결하기
                  </span>
                </div>

                <ul class="code-number">
                  <li class="numberline"><p>1</p></li>
                  <li class="numberline"><p>2</p></li>
                  <li class="numberline"><p>3</p></li>
                  <li class="numberline"><p>4</p></li>
                  <li class="numberline"><p>5</p></li>
                  <li class="numberline"><p>6</p></li>
                  <li class="numberline"><p>7</p></li>
                  <li class="numberline"><p>8</p></li>
                  <li class="numberline"><p>9</p></li>
                  <li class="numberline"><p>10</p></li>
                  <li class="numberline"><p>11</p></li>
                  <li class="numberline"><p>12</p></li>
                  <li class="numberline"><p>13</p></li>
                  <li class="numberline"><p>14</p></li>
                  <li class="numberline"><p>15</p></li>
                </ul>

                <div class="code">
                  <div class="line01">
                    <p>import { MongoClient } from "mongodb";<span class="code-explain">// 첫번째 슬라이드 복사하여 컨테이너 박스 뒷부분에추가하기</span></p>
                  </div>
                  <div class="line02">
                    <p>const url = "mongodb+srv:// ... </p>
                  </div>
                  <div class="line01">
                    <p>const options = { useNewUrlParser: true };</p>
                  </div>
                  <div class="line02">
                    <p>let connectDB;</p>
                  </div>
                  <div class="line01">
                    <p>slideInterval = setInterval(transitionSlide, 3000);<span class="code-explain">함수 실행 시 마다 새로운 타이머를 3초마다 실행</span></p>
                  </div>
                  <div class="line02">
                    <p></p>
                  </div>
                  <div class="line01">
                    <p>if (process.env.NODE_ENV === "development") {</p>
                  </div>
                  <div class="line02">
                    <p>if (!global._mongo) {</p>
                  </div>
                  <div class="line01">
                    <p>global._mongo = new MongoClient(url, options).connect();</p>
                  </div>
                  <div class="line02">
                    <p>}</p>
                  </div>
                  <div class="line01">
                    <p>connectDB = global._mongo;</p>
                  </div>
                  <div class="line02">
                    <p>} else {</p>
                  </div>
                  <div class="line01">
                    <p>connectDB = new MongoClient(url, options).connect();</p>
                  </div>
                  <div class="line02">
                    <p>}</p>
                  </div>
                  <div class="line01">
                    <p>export { connectDB };</p>
                  </div>
                </div>
              </div>

              <!-- 2번 태스크 -->
              <div class="code-real">
                <div class="code-title">
                  <h4>
                    해당 글 아이디 찾아 서버에서 검수 후 삭제하기
                  </h4>
                  <span>
                    버튼 클릭 시 상태 값 카운트를 통해 재생, 정지를
                    구현하였습니다.
                  </span>
                </div>

                <ul class="code-number">
                  <li class="numberline"><p>1</p></li>
                  <li class="numberline"><p>2</p></li>
                  <li class="numberline"><p>3</p></li>
                  <li class="numberline"><p>4</p></li>
                  <li class="numberline"><p>5</p></li>
                  <li class="numberline"><p>6</p></li>
                  <li class="numberline"><p>7</p></li>
                  <li class="numberline"><p>8</p></li>
                  <li class="numberline"><p>9</p></li>
                  <li class="numberline"><p>10</p></li>
                  <li class="numberline"><p>11</p></li>
                  <li class="numberline"><p>12</p></li>
                  <li class="numberline"><p>13</p></li>
                  <li class="numberline"><p>14</p></li>
                  <li class="numberline"><p>15</p></li>
                  <li class="numberline"><p>16</p></li>
                  <li class="numberline"><p>17</p></li>
                  <li class="numberline"><p>18</p></li>
                  <li class="numberline"><p>19</p></li>
                  <li class="numberline"><p>20</p></li>
                  <li class="numberline"><p>21</p></li>
                  <li class="numberline"><p>22</p></li>
                  <li class="numberline"><p>23</p></li>
                  <li class="numberline"><p>24</p></li>
                </ul>

                <div class="code">
                  <div class="line01">
                    <p><span class="code-explain">// list.js 라우팅으로 이동 </span></p>
                  </div>
                  <div class="line02">
                    <p><span class="code-explain">export default async function Correction(props) {</span></p>
                  </div>
                  <div class="line01">
                    <p>const db = (await connectDB).db("forum");</p>
                  </div>
                  <div class="line01">
                    <p>let result = await db</p>
                  </div>
                  <div class="line02">
                    <p> .collection("post")</p>
                  </div>
                  <div class="line01">
                    <p>.findOne({ _id: new ObjectId(props.params.id) });</p>
                  </div>
                  <div class="line02">
                    <p>}</p>
                  </div>
                  <div class="line01">
                    <p>return (</p>
                  </div>
                  <div class="line01">
                    <p>&lt;form action="/api/post/edit" method="POST"&gt;&lt;/form&gt;</p>
                  </div>
                  <div class="line02">
                    <p>&lt;input className="id-value" name="_id" defaultValue={result._id.toString()} /&gt;</p>
                  </div>
                  <div class="line01">
                    <p>}</p>
                  </div>
                  <div class="line02">
                    <p>edit.js</p>
                  </div>
                  <div class="line01">
                    <p>export default async function handler(req, res) {</p>
                  </div>
                  <div class="line02">
                    <p>if (req.method == "POST") {</p>
                  </div>
                  <div class="line01">
                    <p>// console.log(req.body);</p>
                  </div>
                  <div class="line02">
                    <p>let change = { title: req.body.title, content: req.body.content }; // 바꾸는 대상 객체 배열로 담기</p>
                  </div>
                  <div class="line01">
                    <p>console.log(change);</p>
                  </div>
                  <div class="line02">
                    <p>let db = (await connectDB).db("forum"); // 해당 포스트 될 db 불러오기</p>
                  </div>
                  <div class="line01">
                    <p>let result = db</p>
                  </div>
                  <div class="line02">
                    <p>.collection("post")</p>
                  </div>
                  <div class="line01">
                    <p>.updateOne({ _id: new ObjectId(req.body._id) }, { $set: change }); // 포스트 대상 불러와서 요청 내용 집어 넣기</p>
                  </div>
                  <div class="line02">
                    <p>console.log(result);</p>
                  </div>
                  <div class="line01">
                    <p>res.redirect(302, "/list"); // 응답 302 => 유저 /list 페이지로 강제 이동</p>
                  </div>
                  <div class="line02">
                    <p>}</p>
                  </div>
                </div>
              </div>

              <div class="code-real">
                <div class="code-title">
                  <h4>NextAuth 라이브러리</h4>
                  <span>Next.js 애플리케이션에서 사용자 인증을 손쉽게 구현할 수 있도록 도와주는 라이브러리입니다.</span>  
                </div>

                <ul class="code-number">
                  <li class="numberline"><p>1</p></li>
                  <li class="numberline"><p>2</p></li>
                  <li class="numberline"><p>3</p></li>
                  <li class="numberline"><p>4</p></li>
                  <li class="numberline"><p>5</p></li>
                  <li class="numberline"><p>6</p></li>
                  <li class="numberline"><p>7</p></li>
                  <li class="numberline"><p>8</p></li>
                  <li class="numberline"><p>9</p></li>
                  <li class="numberline"><p>10</p></li>
                </ul>

                <div class="code">
                  <div class="line01">
                    <p>export const authOptions = {</p>
                  </div>
                  <div class="line02">
                    <p>providers: [</p>
                  </div>
                  <div class="line01">
                    <p>GoogleProvider({</p>
                  </div>
                  <div class="line02">
                    <p>clientId: process.env.GOOGLE_CLIENT_ID,</p>
                  </div>
                  <div class="line01">
                    <p>clientSecret: process.env.GOOGLE_CLIENT_SECRET,</p>
                  </div>
                  <div class="line02">
                    <p>redirect_uri: "http://localhost:3000/api/auth/callback/google",</p>
                  </div>
                  <div class="line01">
                    <p>}),</p>
                  </div>
                  <div class="line02">
                    <p>],</p>
                  </div>
                  <div class="line01">
                    <p>secret: process.env.NEXTAUTH_SECRET,</p>
                  </div>
                  <div class="line02">
                    <p>};</p>
                  </div>
                </div>
              </div>

              <div class="code-real">
                <div class="code-title">
                  <h4>useEffect, useClient 이용해서 nextAuth 애니메이션 구현</h4>
                  <span>Next.js 애플리케이션에서 사용자 인증을 손쉽게 구현할 수 있도록 도와주는 라이브러리입니다.</span>
                </div>

                <ul class="code-number">
                  <li class="numberline"><p>1</p></li>
                  <li class="numberline"><p>2</p></li>
                  <li class="numberline"><p>3</p></li>
                  <li class="numberline"><p>4</p></li>
                  <li class="numberline"><p>5</p></li>
                  <li class="numberline"><p>6</p></li>
                  <li class="numberline"><p>7</p></li>
                  <li class="numberline"><p>8</p></li>
                  <li class="numberline"><p>9</p></li>
                  <li class="numberline"><p>10</p></li>
                  <li class="numberline"><p>11</p></li>
                  <li class="numberline"><p>12</p></li>
                  <li class="numberline"><p>13</p></li>
                  <li class="numberline"><p>14</p></li>
                  <li class="numberline"><p>15</p></li>
                  <li class="numberline"><p>16</p></li>
                  <li class="numberline"><p>17</p></li>
                </ul>

                <div class="code">
                  <div class="line01">
                    <p>import { useEffect } from 'react';</p>
                  </div>
                  <div class="line02">
                    <p>export default function Cube() {</p>
                  </div>
                  <div class="line01">
                    <p>useEffect(() => {</p>
                  </div>
                  <div class="line02">
                    <p>const handleMouseMove = (event) => {</p>
                  </div>
                  <div class="line01">
                    <p>const cube = document.querySelector('.cube');</p>
                  </div>
                  <div class="line02">
                    <p>const x = event.clientX / window.innerWidth * 2 - 1;</p>
                  </div>
                  <div class="line01">
                    <p>const y = event.clientY / window.innerHeight * 2 - 1;</p>
                  </div>
                  <div class="line02">
                    <p>const rotateX = y * 180;</p>
                  </div>
                  <div class="line01">
                    <p>const rotateY = x * 180;</p>
                  </div>
                  <div class="line02">
                    <p>cube.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;</p>
                  </div>
                  <div class="line01">
                    <p>};</p>
                  </div>
                  <div class="line02">
                    <p>document.addEventListener('mousemove', handleMouseMove);</p>
                  </div>
                  <div class="line01">
                    <p>return () => {</p>
                  </div>
                  <div class="line02">
                    <p>document.removeEventListener('mousemove', handleMouseMove);</p>
                  </div>
                  <div class="line01">
                    <p>};</p>
                  </div>
                  <div class="line02">
                    <p>}, []);</p>
                  </div>
                  <div class="line01">
                    <p>}</p>
                  </div>
                </div>
              </div>

              <div class="code-real">
                <div class="code-title">
                  <h4>데이터베이스에서 값 가져와서 TOP 3만 보여주기</h4>
                  <span>slice 함수를 이용해서 배열에서 객체를 분리한 후, map 함수로 return하였습니다.</span>
                </div>

                <ul class="code-number">
                  <li class="numberline"><p>1</p></li>
                  <li class="numberline"><p>2</p></li>
                  <li class="numberline"><p>3</p></li>
                  <li class="numberline"><p>4</p></li>
                  <li class="numberline"><p>5</p></li>
                  <li class="numberline"><p>6</p></li>
                  <li class="numberline"><p>7</p></li>
                  <li class="numberline"><p>8</p></li>
                  <li class="numberline"><p>9</p></li>
                  <li class="numberline"><p>10</p></li>
                </ul>

                <div class="code">
                  <div class="line01">
                    <p>// result == db 값을 담은 변수</p>
                  </div>
                  <div class="line02">
                    &#123;result.slice(0, 3).map((item, i) =&gt; (
                  </div>
                  <div class="line01">
                    &lt;div className=&quot;top-3-list&quot; key=&#123;i&#125;&gt;
                  </div>
                  <div class="line02">
                    &lt;p className=&quot;top-3-index&quot;&gt;&#123;i + 1&#125;&lt;/p&gt;
                  </div>
                  <div class="line01">
                    &lt;h4 className=&quot;top-3-tit&quot;&gt;&#123;item.title&#125;&lt;/h4&gt;
                  </div>
                  <div class="line02">
                    &lt;div className=&quot;top-3-right&quot;&gt;
                  </div>
                  <div class="line01">
                    &lt;p&gt;&#123;item.author&#125;&lt;/p&gt;
                  </div>
                  <div class="line02">
                    &lt;/div&gt;
                  </div>
                  <div class="line01">
                    <p>&lt;/div&gt;&lt;</p>
                  </div>
                  <div class="line02">
                    &gt;)&#125;
                  </div>
                </div>
            </div>

            </div>
          </div>
        </div>
      </section>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="../js/basic.js"></script>

    <script>
      function openMo() {
        var popup = window.open(
          "http://next-last-env.eba-amfy7tmq.eu-north-1.elasticbeanstalk.com/",
          "nextjs 팝업",
          "width=1024px,scrollbars=yes"
        );
      }

      
      window.onload = function () {
        var mainTask = $(".task-wrap li a");
        var taskExplain = $(".task-box");
        var taskBox = $(".code-real");
        var isOpen = false;

        taskBox.hide();
        taskBox.eq(0).show();

        mainTask.eq(0).css("color", "black");

        mainTask.click(function () {
          // 기능 버튼 클릭 시
          var taskIndex = mainTask.index(this);
          taskBox.eq(taskIndex).show();
          taskExplain.eq(taskIndex).show();

          var notThisIndexes = mainTask
            .not(this)
            .map(function () {
              // 선택 안된 것들의 index 얻기
              return mainTask.index(this);
            })
            .get();

          for (let i = 0; i < notThisIndexes.length; i++) {
            // 반복문 돌면서 display block 시키기
            taskBox.eq(notThisIndexes[i]).hide();
            taskExplain.eq(notThisIndexes[i]).hide();
          }

          $(this).css({
            color: "black",
          });

          mainTask.not(this).css({
            color: "lightgray",
          });
        });
      }
    </script>
  </body>
</html>
